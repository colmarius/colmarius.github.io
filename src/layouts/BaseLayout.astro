---
import "../styles/global.css";

export interface Props {
	title: string;
}

const { title } = Astro.props;

// Navigation items from original config
const NAVIGATION_ITEMS = [
	{ link: "/", title: "Home" },
	{ link: "/about", title: "About" },
	{ link: "/contact", title: "Contact" },
];

const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Marius Colacioiu - Engineering Leader and Entrepreneur from Zürich, Switzerland" />
    <title>{title}</title>
    <link rel="icon" type="image/png" href="/flashtocat.png" />

    <!-- Google Analytics -->
    <script>
      if (import.meta.env.VITE_GOOGLE_ANALYTICS_KEY) {
        // Google Analytics setup would go here
      }
    </script>
  </head>
  <body>
    <!-- Exact container structure from App.tsx -->
    <div class="mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
      <div class="flex flex-col h-[80vh] justify-between">

        <!-- Header - matches original Header.tsx -->
        <header class="flex items-center justify-between pb-20">
          <a href="/" class="text-bold text-3xl hover:text-indigo-600">
            colmarius
          </a>
          <nav>
            <!-- Desktop Menu -->
            <ul class="hidden space-x-8 sm:flex">
              {NAVIGATION_ITEMS.map((item) => (
                <li>
                  <a
                    href={item.link}
                    class={`font-light uppercase hover:text-indigo-600 my-8 border-indigo-600 ${
                      currentPath === item.link ? 'text-indigo-600 border-b-2' : ''
                    }`}
                  >
                    {item.title}
                  </a>
                </li>
              ))}
            </ul>

            <!-- Mobile Menu Button -->
            <button
              class="flex sm:hidden"
              onclick="toggleMobileMenu()"
              id="mobile-menu-button"
            >
              <!-- Hamburger Icon -->
              <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>

            <!-- Mobile Menu Overlay -->
            <div id="mobile-menu" class="hide-menu-nav">
              <div class="absolute top-0 right-0 mt-1 p-4" onclick="closeMobileMenu()">
                <svg
                  class="h-8 w-8 text-gray-600"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <line x1="22" y1="2" x2="2" y2="22" />
                  <line x1="2" y1="2" x2="22" y2="22" />
                </svg>
              </div>
              <ul class="flex flex-col items-center justify-between min-h-[150px]">
                {NAVIGATION_ITEMS.map((item) => (
                  <li>
                    <a
                      href={item.link}
                      onclick="closeMobileMenu()"
                      class={`font-light uppercase hover:text-indigo-600 my-8 border-indigo-600 ${
                        currentPath === item.link ? 'text-indigo-600 border-b-2' : ''
                      }`}
                    >
                      {item.title}
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          </nav>
        </header>

        <!-- Main Content -->
        <main>
          <slot />
        </main>

        <!-- Footer - matches original Footer.tsx -->
        <footer class="mx-auto">
          <div class="font-light mb-10">Copyright © {new Date().getFullYear()} Marius Colacioiu</div>
        </footer>
      </div>
    </div>

    <!-- Mobile Menu CSS and JavaScript -->
    <style>
      .hide-menu-nav {
        display: none;
      }

      .show-menu-nav {
        display: block;
        position: absolute;
        width: 100%;
        height: 100vh;
        top: 0;
        left: 0;
        background: white;
        z-index: 10;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
        align-items: center;
      }
    </style>

    <script>
      function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        if (menu?.classList.contains('hide-menu-nav')) {
          menu.classList.remove('hide-menu-nav');
          menu.classList.add('show-menu-nav');
        } else {
          closeMobileMenu();
        }
      }

      function closeMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        menu?.classList.remove('show-menu-nav');
        menu?.classList.add('hide-menu-nav');
      }
    </script>
  </body>
</html>
