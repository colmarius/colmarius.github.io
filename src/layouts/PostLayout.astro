---
import BackNav from '@components/BackNav.astro';
import Layout from './Layout.astro';

type Props = {
  slug: string;
  title: string;
  description: string;
  pubDate: Date;
  tags?: string[];
};

const { slug, title, description, pubDate, tags } = Astro.props;

const formattedDate = pubDate.toISOString().split('T')[0];
---

<Layout title={title}>
	<article class="post-content">
		<nav class="mb-10" aria-label="Back">
			<BackNav href="/posts" label="Back to Posts" />
		</nav>
		<header class="post-header">
			<h1>{title}</h1>
			<p class="post-description">{description}</p>
			<div class="post-meta">
				<time class="post-date" datetime={pubDate.toISOString()}>
					{formattedDate}
				</time>
				<a href={`/posts/${slug}/slides`} class="slides-link">View as slides</a>
			</div>
			{tags && tags.length > 0 && (
				<div class="post-tags">
					{tags.map((tag) => (
						<span class="tag">{tag}</span>
					))}
				</div>
			)}
		</header>

		<div class="prose-post">
			<slot />
		</div>
	</article>
</Layout>

<style>
	.post-content {
		max-width: 42rem;
		margin: 0 auto;
	}

	.post-header {
		margin-bottom: 3rem;
		padding-bottom: 2rem;
		border-bottom: 1px solid #e5e7eb;
	}

	.post-header h1 {
		font-size: 2.5rem;
		font-weight: 700;
		line-height: 1.2;
		margin-bottom: 1rem;
		color: #111827;
	}

	.post-description {
		font-size: 1.25rem;
		color: #6b7280;
		margin-bottom: 1rem;
		line-height: 1.6;
	}

	.post-meta {
		display: flex;
		align-items: center;
		gap: 1rem;
		margin-bottom: 1rem;
	}

	.post-date {
		font-size: 0.875rem;
		color: #6b7280;
	}

	.post-tags {
		display: flex;
		gap: 0.5rem;
		flex-wrap: wrap;
	}

	.tag {
		display: inline-block;
		padding: 0.25rem 0.75rem;
		background-color: #f3f4f6;
		color: #374151;
		border-radius: 0.375rem;
		font-size: 0.875rem;
		font-weight: 500;
	}

	.slides-link {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		color: #6b7280;
		border: none;
		background: none;
		font-size: 0.875rem;
		font-weight: 400;
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.slides-link::before {
		content: 'â†’';
		font-size: 1rem;
		transition: transform 0.2s ease;
	}

	.slides-link:hover {
		color: #111827;
	}

	.slides-link:hover::before {
		transform: translateX(3px);
	}



	@media (max-width: 640px) {
		.post-header h1 {
			font-size: 2rem;
		}

		.post-description {
			font-size: 1.125rem;
		}

		.prose-post {
			font-size: 1rem;
		}

		.prose-post :global(h2) {
			font-size: 1.5rem;
		}

		.prose-post :global(h3) {
			font-size: 1.25rem;
		}
	}
</style>
